(self["webpackChunk_N_E"]=self["webpackChunk_N_E"]||[]).push([[484],{3322:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/trainers",function(){return r(3982)}]);if(false);},3982:function(e,n,r){"use strict";r.r(n);var a=r(7568);var t=r(6042);var i=r(4051);var u=r.n(i);var o=r(5893);var l=r(7564);var c=r(1232);var d=r(698);var s=r(9236);var v=r(4777);var f=r(7841);var x=r(61);var m=r(1238);var h=r(7294);var b=r(762);var g=r(6441);var j=r(3520);var p=r(6608);var w=r(4743);var _=r(2753);var k=r(3280);var P=r.n(k);var TrainersPage=function(){var e=(0,g.Ux)(b.CJ);var n=(0,h.useState)([]),r=n[0],i=n[1];var P=(0,h.useState)(),T=P[0],C=P[1];var E=(0,h.useState)(false),N=E[0],y=E[1];(0,k.useAsyncEffect)((0,a.Z)(u().mark((function _callee(){var n,r;return u().wrap((function _callee$(a){while(1)switch(a.prev=a.next){case 0:if(e){a.next=2;break}return a.abrupt("return");case 2:a.next=4;return(0,g.Wz)(e);case 4:a.next=6;return e.find();case 6:n=a.sent;i(n);C(null!==(r=null!==T&&void 0!==T?T:n[0])&&void 0!==r?r:void 0);case 10:case"end":return a.stop()}}),_callee)}))),[e]);var A=(0,h.useCallback)((function(){return null===e||void 0===e?void 0:e.create({name:"New Trainer",bbcodeProfile:"Trainer Name: {{name}}\nStarter Pokemon: Species (MT or EM Move)\nBackground: Once upon a time {{name}} set out to be the best like no one ever was..."})}),[e]);if(!e)return(0,o.jsx)(o.Fragment,{children:"Loading...?"});var D,F,S,Z;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(l.K,{children:[(0,o.jsxs)(c.Z,{children:[(0,o.jsx)(d.Ph,{sx:{width:"11em"},data:r.map((function(e){return{label:e.name,value:e.uuid}})),value:null!==(D=null===T||void 0===T?void 0:T.uuid)&&void 0!==D?D:"Loading...",onChange:function(e){return C(r.find((function(n){return n.uuid===e})))}}),(0,o.jsx)(s.D,{order:2,sx:{flexGrow:1,textAlign:"center"},children:"Trainers"}),(0,o.jsx)(j.wP,{ml:"auto",checked:N,onToggle:y})]}),(0,o.jsx)(v.i,{size:"lg"}),(0,o.jsx)(s.D,{order:3,sx:{textAlign:"center"},children:"".concat(null!==(F=null===T||void 0===T?void 0:T.name)&&void 0!==F?F:"No one","'s Profile")}),!!T?(0,o.jsx)(o.Fragment,{}):(0,o.jsx)(f.z,{color:"green",leftIcon:(0,o.jsx)(_.dt,{}),onClick:(0,a.Z)(u().mark((function _callee(){var n;return u().wrap((function _callee$(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return(0,w.AE)((function(){var n;return e&&!(null===(n=e.queryRunner)||void 0===n?void 0:n.isTransactionActive)}));case 2:r.next=4;return e.save(A());case 4:n=r.sent;i([n]);C(n);y(true);case 8:case"end":return r.stop()}}),_callee)}))),children:(0,o.jsx)(s.D,{order:5,children:"Create a Trainer to get started!"})}),!N||!T||!e?(0,o.jsx)(o.Fragment,{}):(0,o.jsx)(p.c,{entityId:T.uuid,targetEntity:T,entityRepo:e,confirmDeletePlaceholder:"".concat(T.name," has blacked out!"),createNewEntity:A,onAdd:function(e){i(r.concat(e));C(e)},onUpdate:function(e){C(e);var n=r.findIndex((function(n){return n.uuid===e.uuid}));r[n]=e;i(r.slice())},onConfirmedDelete:function(e){var n=r.findIndex((function(n){return n.uuid===e.uuid}));var a=r.filter((function(n){return n.uuid!==e.uuid}));i(a);C(0===a.length?void 0:a[Math.max(0,n-1)])},children:function(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(x.o,(0,t.Z)({required:true,label:"Trainer Name"},e.name)),(0,o.jsx)(m.g,(0,t.Z)({label:"[BBCode] Profile",styles:{input:{resize:"vertical"}},minRows:6},e.bbcodeProfile))]})}}),(0,o.jsx)(j.Gp,{label:"Trainer ".concat(null!==(S=null===T||void 0===T?void 0:T.name)&&void 0!==S?S:""),bbCode:null!==(Z=null===T||void 0===T?void 0:T.bbcodeProfile.replaceAll("{{name}}",T.name))&&void 0!==Z?Z:""})]})})};n["default"]=TrainersPage}},function(e){var __webpack_exec__=function(n){return e(e.s=n)};e.O(0,[774,888,179],(function(){return __webpack_exec__(3322)}));var n=e.O();_N_E=n}]);