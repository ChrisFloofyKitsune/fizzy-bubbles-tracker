(self["webpackChunk_N_E"]=self["webpackChunk_N_E"]||[]).push([[789],{295:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/wallet",function(){return n(3286)}]);if(false);},3286:function(e,r,n){"use strict";n.r(r);var t=n(7568);var a=n(4924);var i=n(6042);var c=n(9396);var s=n(828);var l=n(9815);var o=n(4051);var u=n.n(o);var d=n(5893);var x=n(8067);var h=n(7564);var v=n(1232);var p=n(9236);var f=n(4459);var j=n(5117);var m=n(6222);var g=n(3723);var _=n(6441);var w=n(7294);var A=n(762);var y=n(3280);var b=n.n(y);var C=n(3520);var T=n(8528);var D=n(1632);var Z=n(2753);var O=n(7106);var E=n(55);var R=n(1839);var V=(0,x.k)({quantityChange:{width:"12em"}});var WalletPage=function(){var e=(0,_.Ux)(A.Ys);var r=(0,s.Z)((0,T.n)([]),2),n=r[0],o=r[1];var x=(0,w.useState)(false),b=x[0],k=x[1];(0,y.useAsyncEffect)((0,t.Z)(u().mark((function _callee(){return u().wrap((function _callee$(r){while(1)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:r.next=4;return(0,_.Wz)(e);case 4:r.t0=o;r.next=7;return e.find();case 7:r.t1=r.sent;r.t0.setState.call(r.t0,r.t1);case 9:case"end":return r.stop()}}),_callee)}))),[e]);var L=(0,w.useMemo)((function(){var e;return n.reduce((function(e,r){var n=r.currencyType,t=r.quantityChange;e[n]+=t;return e}),(e=Object).assign.apply(e,[{}].concat((0,l.Z)(Object.values(D.V2).map((function(e){return(0,a.Z)({},e,0)}))))))}),[n]);var S=(0,_.Dd)(e);var U=(0,w.useCallback)((function(r){return{rowObjs:n.filter((function(e){return e.currencyType===r})),add:(0,t.Z)(u().mark((function _callee(){var n;return u().wrap((function _callee$(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return e.save(e.create({currencyType:r}));case 2:n=t.sent;o.append(n);case 4:case"end":return t.stop()}}),_callee)}))),edit:function(){var e=(0,t.Z)(u().mark((function _callee(e,r,t){var i;return u().wrap((function _callee$(c){while(1)switch(c.prev=c.next){case 0:if(!("undefined"===typeof r)){c.next=2;break}return c.abrupt("return");case 2:i=n.findIndex((function(r){return r.id===e.id}));o.setItemProp(i,r,t);S(e,(0,a.Z)({},r,t));case 5:case"end":return c.stop()}}),_callee)})));return function(r,n,t){return e.apply(this,arguments)}}(),remove:function(){var r=(0,t.Z)(u().mark((function _callee(r){return u().wrap((function _callee$(n){while(1)switch(n.prev=n.next){case 0:o.filter((function(e){return e.id!==r.id}));n.next=3;return e.remove(r);case 3:case"end":return n.stop()}}),_callee)})));return function(e){return r.apply(this,arguments)}}()}}),[S,n,o,e]);var Y=(0,w.useMemo)((function(){var e;return(e=Object).assign.apply(e,[{}].concat((0,l.Z)(Object.values(D.V2).map((function(e){return(0,a.Z)({},e,U(e))})))))}),[U]);var P=V();var G=(0,w.useMemo)((function(){return{isShopLog:true,rowObjToId:function(e){return e.id},propConfig:{quantityChange:(0,E.cL)("quantityChange","Change",0)}}}),[]);var N,M,W;return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(h.K,{children:[(0,d.jsxs)(v.Z,{sx:{alignContent:"center"},children:[(0,d.jsx)(p.D,{order:2,sx:{width:"50%",textAlign:"right",marginRight:"auto"},children:"Wallet"}),(0,d.jsx)(C.wP,{checked:b,onToggle:k})]}),(0,d.jsx)(p.D,{order:3,children:"Summary"}),(0,d.jsxs)(f.x,{sx:{width:"100%",display:"grid",gridAutoFlow:"column",gap:"0.25em 1em",padding:"0 2rem",maxWidth:"60em",margin:"auto",gridTemplate:"repeat(5, 1fr) / 1fr","& > *":{borderBottom:"1px gray solid"},"& .mantine-Group-root":{justifyContent:"space-between",gap:"0.5em",".mantine-Text-root:nth-of-type(2)":{flexGrow:3,textAlign:"right"},".mantine-Text-root:nth-of-type(3)":{width:"1.5em",height:"1.5em",textAlign:"center"}},"& svg":{display:"inline",verticalAlign:"middle",marginTop:"-0.3em"}},children:[(0,d.jsxs)(v.Z,{children:[(0,d.jsx)(p.D,{order:4,children:"Currency"}),(0,d.jsx)(p.D,{order:4,align:"right",children:"Balance"})]}),(0,d.jsxs)(v.Z,{children:[(0,d.jsx)(j.x,{children:D.GY.pokedollar[1]}),(0,d.jsx)(j.x,{children:"".concat((null!==(N=L.pokedollar)&&void 0!==N?N:0).toLocaleString("en-US"))}),(0,d.jsx)(j.x,{children:(0,d.jsx)(Z.sR,{size:"1em"})})]}),(0,d.jsxs)(v.Z,{children:[(0,d.jsx)(j.x,{children:D.GY.watts[1]}),(0,d.jsx)(j.x,{children:"".concat((null!==(M=L.watts)&&void 0!==M?M:0).toLocaleString("en-US"))}),(0,d.jsx)(j.x,{weight:500,children:"W"})]}),(0,d.jsxs)(v.Z,{children:[(0,d.jsx)(j.x,{children:D.GY.rarecandy[1]}),(0,d.jsx)(j.x,{children:"".concat((null!==(W=L.rarecandy)&&void 0!==W?W:0).toLocaleString("en-US"))}),(0,d.jsx)(j.x,{children:(0,d.jsx)(O.AV2,{size:"1.3em"})})]})]}),(0,d.jsx)(p.D,{order:3,children:"Detail"}),(0,d.jsxs)(m.U,{variant:"separated",multiple:true,sx:function(e){return{".mantine-Accordion-panel":{margin:"0.5em",borderRadius:"0.5em",border:"1px solid "+e.colors.gray[7],backgroundColor:e.fn.darken(e.colors.gray[9],.2)},".mantine-Accordion-content":{borderRadius:"0.5em",overflow:"clip",padding:"2px"}}},children:[(0,d.jsxs)(m.U.Item,{value:D.V2.POKE_DOLLAR,children:[(0,d.jsx)(m.U.Control,{children:(0,d.jsx)(p.D,{order:4,children:D.GY[D.V2.POKE_DOLLAR][1]})}),(0,d.jsx)(m.U.Panel,{children:(0,d.jsx)(g.x.Autosize,{maxHeight:"40vh",children:(0,d.jsx)(R.Q,(0,c.Z)((0,i.Z)({},G,Y[D.V2.POKE_DOLLAR]),{isEditMode:b,propsToMantineClasses:P.classes}),"log-data-table-".concat(D.V2.POKE_DOLLAR))})})]},D.V2.POKE_DOLLAR),(0,d.jsxs)(m.U.Item,{value:D.V2.WATTS,children:[(0,d.jsx)(m.U.Control,{children:(0,d.jsx)(p.D,{order:4,children:D.GY[D.V2.WATTS][1]})}),(0,d.jsx)(m.U.Panel,{children:(0,d.jsx)(g.x.Autosize,{maxHeight:"40vh",children:(0,d.jsx)(R.Q,(0,c.Z)((0,i.Z)({},G,Y[D.V2.WATTS]),{isEditMode:b,propsToMantineClasses:P.classes}),"log-data-table-".concat(D.V2.WATTS))})})]},D.V2.WATTS),(0,d.jsxs)(m.U.Item,{value:D.V2.RARE_CANDY,children:[(0,d.jsx)(m.U.Control,{children:(0,d.jsx)(p.D,{order:4,children:D.GY[D.V2.RARE_CANDY][1]})}),(0,d.jsx)(m.U.Panel,{children:(0,d.jsx)(g.x.Autosize,{maxHeight:"40vh",children:(0,d.jsx)(R.Q,(0,c.Z)((0,i.Z)({},G,Y[D.V2.RARE_CANDY]),{isEditMode:b,propsToMantineClasses:P.classes}),"log-data-table-".concat(D.V2.RARE_CANDY))})})]},D.V2.RARE_CANDY)]}),(0,d.jsx)(p.D,{order:3,children:"Output"}),(0,d.jsx)(h.K,{children:Object.values(D.V2).map((function(e){return(0,d.jsx)(C.Gp,{label:D.GY[e][1]+" Log",bbCode:A.Ys.createBBCode(n,e)},"output-".concat(e))}))})]})})};r["default"]=WalletPage}},function(e){var __webpack_exec__=function(r){return e(e.s=r)};e.O(0,[222,774,888,179],(function(){return __webpack_exec__(295)}));var r=e.O();_N_E=r}]);